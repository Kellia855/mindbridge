<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MindBridge - ALU Wellness Center</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #0b2d4a 0%, #04023e 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .story-card {
            background: linear-gradient(145deg, #f8fafc, #e2e8f0);
            border-left: 4px solid #bf0e0e;
        }
        
        .book-spine {
            background: linear-gradient(90deg, #011856, #3b82f6);
            writing-mode: vertical-rl;
            text-orientation: mixed;
        }
        
        .dashboard-nav {
            background: #002b5c;
            backdrop-filter: blur(10px);
        }
        
        .floating-action {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 50;
        }
        
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
        }
        
        .loading-spinner {
            border: 3px solid #cacccf;
            border-top: 3px solid #bf0e0e;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="bg-gray-50 min-h-full"><!-- Navigation -->
  <nav class="dashboard-nav text-white shadow-lg sticky top-0 z-40">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
     <div class="flex items-center space-x-4">
      <div class="w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center"><span class="text-white font-bold text-lg">MB</span>
      </div>
      <h1 class="text-xl font-bold" id="platform-title">MindBridge</h1>
     </div>
     <div class="hidden md:flex space-x-6"><button onclick="showSection('home')" class="nav-btn hover:text-red-300 transition-colors">Home</button> <button onclick="showSection('booking')" class="nav-btn hover:text-red-300 transition-colors">Book Session</button> <button onclick="showSection('library')" class="nav-btn hover:text-red-300 transition-colors">Library</button> <button onclick="showSection('stories')" class="nav-btn hover:text-red-300 transition-colors">Stories</button> <button onclick="showSection('dashboard')" class="nav-btn hover:text-red-300 transition-colors">Dashboard</button>
     </div>
     <div class="flex items-center space-x-4">
      <!-- Auth buttons (shown when not logged in) -->
      <div id="auth-buttons" class="flex items-center space-x-3">
       <button onclick="showLoginModal()" class="text-white hover:text-red-300 transition-colors">Login</button>
       <button onclick="showRegisterModal()" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors">Register</button>
      </div>
      <!-- User menu (shown when logged in) -->
      <div id="user-menu" class="hidden flex items-center space-x-3">
       <span id="user-name" class="text-white"></span>
       <button onclick="handleLogout()" class="text-white hover:text-red-300 transition-colors">Logout</button>
       <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center">
        <span id="user-initial" class="text-white font-bold"></span>
       </div>
      </div>
     </div>
    </div>
   </div>
  </nav><!-- Main Content -->
  <main><!-- Home Section -->
   <section id="home-section" class="section-content"><!-- Hero Section -->
    <div class="relative min-h-screen flex items-center">
     <div class="absolute inset-0 gradient-bg"></div>
     <div class="absolute inset-0 opacity-20">
      <svg viewbox="0 0 1200 800" class="w-full h-full"><defs>
        <pattern id="wellness-pattern" x="0" y="0" width="100" height="100" patternunits="userSpaceOnUse">
         <circle cx="50" cy="50" r="2" fill="white" opacity="0.3" />
        </pattern>
       </defs> <rect width="100%" height="100%" fill="url(#wellness-pattern)" />
      </svg>
     </div>
     <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
       <div class="text-white">
        <h1 class="text-5xl lg:text-6xl font-bold mb-6" id="welcome-message">Your mental wellness journey starts here</h1>
        <p class="text-xl opacity-90 mb-8 leading-relaxed">Connect with ALU's wellness center online. Book sessions with certified specialists, explore our comprehensive psychology library, and share your story in a safe, supportive community.</p>
        <div class="flex flex-wrap gap-4 mb-8"><button onclick="showSection('booking')" class="bg-white text-blue-900 px-8 py-4 rounded-lg font-semibold hover:bg-gray-100 transition-colors text-lg">Book a Session</button> <button onclick="showSection('library')" class="border-2 border-white text-white px-8 py-4 rounded-lg font-semibold hover:bg-white hover:text-blue-900 transition-colors text-lg">Browse Library</button>
        </div><!-- Trust Indicators -->
        <div class="flex items-center space-x-6 text-sm opacity-80">
         <div class="flex items-center">
          <svg class="w-5 h-5 mr-2" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
          </svg> Certified Specialists
         </div>
         <div class="flex items-center">
          <svg class="w-5 h-5 mr-2" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2z" clip-rule="evenodd" />
          </svg> 100% Confidential
         </div>
         <div class="flex items-center">
          <svg class="w-5 h-5 mr-2" fill="currentColor" viewbox="0 0 20 20"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg> 24/7 Support
         </div>
        </div>
       </div>
       <div class="relative"><!-- Wellness Illustration -->
        <div class="bg-white bg-opacity-10 backdrop-blur-sm rounded-2xl p-8">
         <svg viewbox="0 0 400 300" class="w-full h-auto"><!-- Meditation figure --> <circle cx="200" cy="120" r="25" fill="#ffffff" opacity="0.9" /> <rect x="185" y="145" width="30" height="40" rx="15" fill="#ffffff" opacity="0.9" /> <circle cx="180" cy="185" r="8" fill="#ffffff" opacity="0.7" /> <circle cx="220" cy="185" r="8" fill="#ffffff" opacity="0.7" /> <!-- Peaceful elements --> <path d="M100 200 Q150 180 200 200 Q250 180 300 200" stroke="#ffffff" stroke-width="2" fill="none" opacity="0.6" /> <circle cx="120" cy="160" r="3" fill="#ffffff" opacity="0.5" /> <circle cx="280" cy="170" r="3" fill="#ffffff" opacity="0.5" /> <circle cx="150" cy="140" r="2" fill="#ffffff" opacity="0.4" /> <circle cx="250" cy="150" r="2" fill="#ffffff" opacity="0.4" /> <!-- Growth symbols --> <path d="M80 220 Q90 200 100 220 M90 220 L90 240" stroke="#ffffff" stroke-width="2" opacity="0.6" /> <path d="M300 220 Q310 200 320 220 M310 220 L310 240" stroke="#ffffff" stroke-width="2" opacity="0.6" />
         </svg>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Features Overview -->
    <div class="bg-white py-20">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
       <h2 class="text-4xl font-bold text-gray-900 mb-4">Comprehensive Mental Health Support</h2>
       <p class="text-xl text-gray-600 max-w-3xl mx-auto">Everything you need for your mental wellness journey, all in one place</p>
      </div>
      <div class="grid lg:grid-cols-3 gap-8"><!-- Booking Feature -->
       <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-2xl p-8 card-hover cursor-pointer" onclick="showSection('booking')">
        <div class="w-16 h-16 bg-blue-600 rounded-xl flex items-center justify-center mb-6">
         <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
         </svg>
        </div>
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Book Sessions</h3>
        <p class="text-gray-600 mb-6">Schedule one-on-one sessions with certified mental health specialists. Choose from counselors, therapists, and wellness coaches.</p>
        <div class="flex items-center text-blue-600 font-semibold"><span>Book Now</span>
         <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
         </svg>
        </div>
       </div><!-- Library Feature -->
       <div class="bg-gradient-to-br from-red-50 to-red-100 rounded-2xl p-8 card-hover cursor-pointer" onclick="showSection('library')">
        <div class="w-16 h-16 bg-red-600 rounded-xl flex items-center justify-center mb-6">
         <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
         </svg>
        </div>
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Wellness Library</h3>
        <p class="text-gray-600 mb-6">Access our curated collection of psychology books, self-help guides, and inspirational resources for personal growth.</p>
        <div class="flex items-center text-red-600 font-semibold"><span>Explore Books</span>
         <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
         </svg>
        </div>
       </div><!-- Stories Feature -->
       <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-8 card-hover cursor-pointer" onclick="showSection('stories')">
        <div class="w-16 h-16 bg-gray-600 rounded-xl flex items-center justify-center mb-6">
         <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z" />
         </svg>
        </div>
        <h3 class="text-2xl font-bold text-gray-900 mb-4">Share Stories</h3>
        <p class="text-gray-600 mb-6">Share your journey anonymously and inspire others. Read stories of hope, resilience, and personal growth from the community.</p>
        <div class="flex items-center text-gray-600 font-semibold"><span>Read Stories</span>
         <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
         </svg>
        </div>
       </div>
      </div>
     </div>
    </div><!-- Statistics Section -->
    <div class="bg-gray-50 py-20">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
       <h2 class="text-3xl font-bold text-gray-900 mb-4">Making a Difference</h2>
       <p class="text-lg text-gray-600">See the impact of our wellness community</p>
      </div>
      <div class="grid md:grid-cols-4 gap-8">
       <div class="text-center">
        <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
         <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
         </svg>
        </div>
        <h3 class="text-3xl font-bold text-blue-600 mb-2" id="sessions-count">0</h3>
        <p class="text-gray-600">Sessions Booked</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
         <svg class="w-10 h-10 text-red-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
         </svg>
        </div>
        <h3 class="text-3xl font-bold text-red-600 mb-2" id="books-count">0</h3>
        <p class="text-gray-600">Books Available</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
         <svg class="w-10 h-10 text-gray-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
         </svg>
        </div>
        <h3 class="text-3xl font-bold text-gray-600 mb-2" id="stories-count">0</h3>
        <p class="text-gray-600">Stories Shared</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
         <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
         </svg>
        </div>
        <h3 class="text-3xl font-bold text-green-600 mb-2">500+</h3>
        <p class="text-gray-600">Lives Impacted</p>
       </div>
      </div>
     </div>
    </div>
   </section><!-- Booking Section -->
   <section id="booking-section" class="section-content hidden"><!-- Hero Section for Booking -->
    <div class="relative bg-gradient-to-r from-blue-900 to-blue-700 py-20">
     <div class="absolute inset-0 opacity-10">
      <svg viewbox="0 0 1200 400" class="w-full h-full"><defs>
        <pattern id="booking-pattern" x="0" y="0" width="60" height="60" patternunits="userSpaceOnUse">
         <circle cx="30" cy="30" r="1.5" fill="white" opacity="0.4" />
        </pattern>
       </defs> <rect width="100%" height="100%" fill="url(#booking-pattern)" />
      </svg>
     </div>
     <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center text-white">
       <h1 class="text-4xl lg:text-5xl font-bold mb-4" id="booking-title">Book a Session</h1>
       <p class="text-xl opacity-90 max-w-3xl mx-auto">Take the first step towards better mental health. Schedule a confidential session with one of our certified specialists.</p>
      </div>
     </div>
    </div><!-- Booking Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"><!-- Process Steps -->
     <div class="mb-16">
      <h2 class="text-3xl font-bold text-gray-900 text-center mb-12">How It Works</h2>
      <div class="grid md:grid-cols-3 gap-8">
       <div class="text-center">
        <div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
         <svg class="w-10 h-10 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-900 mb-3">1. Fill the Form</h3>
        <p class="text-gray-600">Complete our simple booking form with your details and preferences.</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6">
         <svg class="w-10 h-10 text-red-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-900 mb-3">2. Choose Time</h3>
        <p class="text-gray-600">Select your preferred date, time, and specialist from our available options.</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
         <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-900 mb-3">3. Get Confirmation</h3>
        <p class="text-gray-600">Receive instant confirmation and session details via email.</p>
       </div>
      </div>
     </div><!-- Main Booking Section -->
     <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
      <div class="grid lg:grid-cols-2"><!-- Booking Form -->
       <div class="p-8 lg:p-12">
        <h3 class="text-2xl font-bold text-gray-900 mb-6">Schedule Your Session</h3>
        <form id="booking-form" class="space-y-6">
         <div><label for="student-name" class="block text-sm font-medium text-gray-700 mb-2">Your Name</label> <input type="text" id="student-name" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
         </div>
         <div><label for="student-email" class="block text-sm font-medium text-gray-700 mb-2">Email Address</label> <input type="email" id="student-email" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
         </div>
         <div><label for="specialist-select" class="block text-sm font-medium text-gray-700 mb-2">Choose Specialist</label> <select id="specialist-select" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">Select a specialist</option> <option value="Dr. Sarah Johnson - Counseling Psychologist">Dr. Sarah Johnson - Counseling Psychologist</option> <option value="Dr. Michael Chen - Clinical Therapist">Dr. Michael Chen - Clinical Therapist</option> <option value="Dr. Amara Okafor - Wellness Coach">Dr. Amara Okafor - Wellness Coach</option> <option value="Dr. Lisa Thompson - Mental Health Counselor">Dr. Lisa Thompson - Mental Health Counselor</option> </select>
         </div>
         <div class="grid md:grid-cols-2 gap-4">
          <div><label for="session-date" class="block text-sm font-medium text-gray-700 mb-2">Preferred Date</label> <input type="date" id="session-date" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
          </div>
          <div><label for="session-time" class="block text-sm font-medium text-gray-700 mb-2">Preferred Time</label> <select id="session-time" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">Select time slot</option> <option value="09:00 AM">09:00 AM</option> <option value="10:00 AM">10:00 AM</option> <option value="11:00 AM">11:00 AM</option> <option value="02:00 PM">02:00 PM</option> <option value="03:00 PM">03:00 PM</option> <option value="04:00 PM">04:00 PM</option> </select>
          </div>
         </div>
         <div><label for="session-notes" class="block text-sm font-medium text-gray-700 mb-2">Additional Notes (Optional)</label> <textarea id="session-notes" rows="3" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Any specific concerns or preferences..."></textarea>
         </div><button type="submit" id="book-session-btn" class="w-full bg-blue-900 text-white py-4 px-6 rounded-lg font-semibold hover:bg-blue-800 transition-colors flex items-center justify-center text-lg"> <span id="book-btn-text">Book Session</span>
          <div id="book-loading" class="loading-spinner ml-2 hidden"></div></button>
        </form>
       </div><!-- Wellness Image and Info -->
       <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-8 lg:p-12 flex flex-col justify-center"><!-- Counseling Illustration -->
        <div class="mb-8">
         <svg viewbox="0 0 400 300" class="w-full h-auto max-w-sm mx-auto"><!-- Therapy session illustration --> <rect x="50" y="200" width="300" height="80" rx="10" fill="#e5e7eb" opacity="0.3" /> <!-- Therapist --> <circle cx="120" cy="150" r="20" fill="#3b82f6" /> <rect x="105" y="170" width="30" height="35" rx="15" fill="#3b82f6" /> <!-- Client --> <circle cx="280" cy="150" r="20" fill="#dc2626" /> <rect x="265" y="170" width="30" height="35" rx="15" fill="#dc2626" /> <!-- Chairs --> <rect x="100" y="190" width="40" height="20" rx="5" fill="#6b7280" /> <rect x="260" y="190" width="40" height="20" rx="5" fill="#6b7280" /> <!-- Conversation bubbles --> <circle cx="150" cy="120" r="15" fill="white" opacity="0.9" /> <circle cx="250" cy="130" r="12" fill="white" opacity="0.9" /> <!-- Plant decoration --> <rect x="320" y="180" width="8" height="30" fill="#10b981" /> <circle cx="324" cy="175" r="8" fill="#10b981" />
         </svg>
        </div>
        <div class="text-center">
         <h3 class="text-2xl font-bold text-gray-900 mb-4">Professional Support</h3>
         <p class="text-gray-600 mb-6">Our certified specialists provide confidential, professional mental health support tailored to your needs.</p>
         <div class="space-y-3 text-sm">
          <div class="flex items-center justify-center">
           <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
           </svg><span>Licensed professionals</span>
          </div>
          <div class="flex items-center justify-center">
           <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
           </svg><span>Completely confidential</span>
          </div>
          <div class="flex items-center justify-center">
           <svg class="w-5 h-5 text-green-500 mr-2" fill="currentColor" viewbox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
           </svg><span>Flexible scheduling</span>
          </div>
         </div>
        </div>
       </div>
      </div>
     </div><!-- Specialists Section -->
     <div class="mt-16">
      <h2 class="text-3xl font-bold text-gray-900 text-center mb-12">Meet Our Specialists</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
       <div class="bg-white rounded-xl shadow-lg p-6 text-center card-hover">
        <div class="w-20 h-20 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full mx-auto mb-4 flex items-center justify-center">
         <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
         </svg>
        </div>
        <h4 class="font-bold text-gray-900 mb-1">Dr. Sarah Johnson</h4>
        <p class="text-sm text-blue-600 mb-2">Counseling Psychologist</p>
        <p class="text-xs text-gray-500">Anxiety, Depression, Academic Stress</p>
       </div>
       <div class="bg-white rounded-xl shadow-lg p-6 text-center card-hover">
        <div class="w-20 h-20 bg-gradient-to-br from-red-400 to-red-600 rounded-full mx-auto mb-4 flex items-center justify-center">
         <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
         </svg>
        </div>
        <h4 class="font-bold text-gray-900 mb-1">Dr. Michael Chen</h4>
        <p class="text-sm text-red-600 mb-2">Clinical Therapist</p>
        <p class="text-xs text-gray-500">CBT, Trauma, Behavioral Therapy</p>
       </div>
       <div class="bg-white rounded-xl shadow-lg p-6 text-center card-hover">
        <div class="w-20 h-20 bg-gradient-to-br from-green-400 to-green-600 rounded-full mx-auto mb-4 flex items-center justify-center">
         <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
         </svg>
        </div>
        <h4 class="font-bold text-gray-900 mb-1">Dr. Amara Okafor</h4>
        <p class="text-sm text-green-600 mb-2">Wellness Coach</p>
        <p class="text-xs text-gray-500">Mindfulness, Stress Management</p>
       </div>
       <div class="bg-white rounded-xl shadow-lg p-6 text-center card-hover">
        <div class="w-20 h-20 bg-gradient-to-br from-purple-400 to-purple-600 rounded-full mx-auto mb-4 flex items-center justify-center">
         <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
         </svg>
        </div>
        <h4 class="font-bold text-gray-900 mb-1">Dr. Lisa Thompson</h4>
        <p class="text-sm text-purple-600 mb-2">Mental Health Counselor</p>
        <p class="text-xs text-gray-500">Relationships, Family Counseling</p>
       </div>
      </div>
     </div>
    </div>
   </section><!-- Library Section -->
   <section id="library-section" class="section-content hidden"><!-- Library Hero Section -->
    <div class="relative bg-gradient-to-r from-red-900 to-red-700 py-20">
     <div class="absolute inset-0 opacity-10">
      <svg viewbox="0 0 1200 400" class="w-full h-full"><defs>
        <pattern id="library-pattern" x="0" y="0" width="80" height="80" patternunits="userSpaceOnUse">
         <rect x="20" y="20" width="40" height="6" fill="white" opacity="0.3" />
         <rect x="20" y="30" width="40" height="6" fill="white" opacity="0.2" />
         <rect x="20" y="40" width="40" height="6" fill="white" opacity="0.3" />
        </pattern>
       </defs> <rect width="100%" height="100%" fill="url(#library-pattern)" />
      </svg>
     </div>
     <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center text-white">
       <h1 class="text-4xl lg:text-5xl font-bold mb-4" id="library-title">Wellness Library</h1>
       <p class="text-xl opacity-90 max-w-3xl mx-auto">Discover our curated collection of psychology books, self-help guides, and inspirational resources to support your mental wellness journey.</p>
      </div>
     </div>
    </div><!-- Library Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"><!-- Featured Books Section -->
     <div class="mb-16">
      <h2 class="text-3xl font-bold text-gray-900 text-center mb-12">Featured Books</h2>
      <div class="grid md:grid-cols-3 gap-8">
       <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
        <div class="h-48 bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center">
         <svg viewbox="0 0 200 250" class="w-32 h-40"><rect x="20" y="20" width="160" height="210" rx="8" fill="white" opacity="0.9" /> <rect x="30" y="40" width="140" height="4" fill="#3b82f6" /> <rect x="30" y="50" width="100" height="3" fill="#6b7280" /> <rect x="30" y="60" width="120" height="3" fill="#6b7280" /> <circle cx="100" cy="130" r="30" fill="#3b82f6" opacity="0.2" /> <path d="M85 130 Q100 115 115 130 Q100 145 85 130" fill="#3b82f6" />
         </svg>
        </div>
        <div class="p-6">
         <h3 class="font-bold text-gray-900 mb-2">The Happiness Hypothesis</h3>
         <p class="text-sm text-gray-600 mb-3">by Jonathan Haidt</p>
         <p class="text-xs text-gray-500">Explores ancient wisdom and modern psychology to understand what makes life worth living.</p>
        </div>
       </div>
       <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
        <div class="h-48 bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center">
         <svg viewbox="0 0 200 250" class="w-32 h-40"><rect x="20" y="20" width="160" height="210" rx="8" fill="white" opacity="0.9" /> <rect x="30" y="40" width="140" height="4" fill="#dc2626" /> <rect x="30" y="50" width="110" height="3" fill="#6b7280" /> <rect x="30" y="60" width="130" height="3" fill="#6b7280" /> <circle cx="100" cy="130" r="25" fill="#dc2626" opacity="0.2" /> <rect x="90" y="120" width="20" height="20" fill="#dc2626" />
         </svg>
        </div>
        <div class="p-6">
         <h3 class="font-bold text-gray-900 mb-2">Atomic Habits</h3>
         <p class="text-sm text-gray-600 mb-3">by James Clear</p>
         <p class="text-xs text-gray-500">Learn how tiny changes can lead to remarkable results in personal development.</p>
        </div>
       </div>
       <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
        <div class="h-48 bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center">
         <svg viewbox="0 0 200 250" class="w-32 h-40"><rect x="20" y="20" width="160" height="210" rx="8" fill="white" opacity="0.9" /> <rect x="30" y="40" width="140" height="4" fill="#10b981" /> <rect x="30" y="50" width="90" height="3" fill="#6b7280" /> <rect x="30" y="60" width="110" height="3" fill="#6b7280" /> <circle cx="100" cy="130" r="20" fill="#10b981" opacity="0.3" /> <path d="M90 130 L100 120 L110 130 L100 140 Z" fill="#10b981" />
         </svg>
        </div>
        <div class="p-6">
         <h3 class="font-bold text-gray-900 mb-2">Mindfulness for Beginners</h3>
         <p class="text-sm text-gray-600 mb-3">by Jon Kabat-Zinn</p>
         <p class="text-xs text-gray-500">A practical guide to mindfulness meditation and stress reduction techniques.</p>
        </div>
       </div>
      </div>
     </div><!-- Library Tools -->
     <div class="bg-white rounded-2xl shadow-xl p-8 mb-12">
      <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8">
       <div>
        <h2 class="text-2xl font-bold text-gray-900 mb-2">Browse Our Collection</h2>
        <p class="text-gray-600">Find the perfect book to support your mental wellness journey</p>
       </div><button onclick="showAddBookModal()" id="add-book-btn" class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors hidden mt-4 lg:mt-0">Add New Book</button>
      </div><!-- Search and Filter -->
      <div class="mb-8">
       <div class="flex flex-col sm:flex-row gap-4">
        <div class="flex-1 relative">
         <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
         </svg><input type="text" id="book-search" placeholder="Search books by title or author..." class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
        </div><select id="book-category" class="px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"> <option value="">All Categories</option> <option value="psychology">Psychology</option> <option value="self-help">Self Help</option> <option value="mindfulness">Mindfulness</option> <option value="inspiration">Inspiration</option> </select>
       </div>
      </div><!-- Books Grid -->
      <div id="books-grid" class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"><!-- Books will be populated here -->
      </div>
      <div id="no-books-message" class="text-center py-16 text-gray-500">
       <div class="mb-6">
        <svg class="w-24 h-24 mx-auto text-gray-300" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
        </svg>
       </div>
       <h3 class="text-xl font-semibold text-gray-400 mb-2">No books available yet</h3>
       <p class="text-gray-400">Check back soon for new additions to our wellness library!</p>
      </div>
     </div><!-- Reading Benefits -->
     <div class="bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-8">
      <div class="text-center mb-8">
       <h2 class="text-3xl font-bold text-gray-900 mb-4">Why Reading Matters for Mental Health</h2>
       <p class="text-lg text-gray-600 max-w-3xl mx-auto">Research shows that reading can significantly improve mental wellness and emotional intelligence.</p>
      </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
       <div class="text-center">
        <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
         <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
         </svg>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Reduces Stress</h3>
        <p class="text-sm text-gray-600">Reading can lower stress levels by up to 68%</p>
       </div>
       <div class="text-center">
        <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
         <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
         </svg>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Builds Empathy</h3>
        <p class="text-sm text-gray-600">Improves emotional intelligence and understanding</p>
       </div>
       <div class="text-center">
        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
         <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
         </svg>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Enhances Focus</h3>
        <p class="text-sm text-gray-600">Strengthens concentration and mindfulness</p>
       </div>
       <div class="text-center">
        <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
         <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
         </svg>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Promotes Sleep</h3>
        <p class="text-sm text-gray-600">Reading before bed improves sleep quality</p>
       </div>
      </div>
     </div>
    </div>
   </section><!-- Stories Section -->
   <section id="stories-section" class="section-content hidden"><!-- Stories Hero Section -->
    <div class="relative bg-gradient-to-r from-gray-900 to-gray-700 py-20">
     <div class="absolute inset-0 opacity-10">
      <svg viewbox="0 0 1200 400" class="w-full h-full"><defs>
        <pattern id="stories-pattern" x="0" y="0" width="100" height="100" patternunits="userSpaceOnUse">
         <circle cx="25" cy="25" r="2" fill="white" opacity="0.3" />
         <circle cx="75" cy="75" r="1.5" fill="white" opacity="0.2" />
         <circle cx="50" cy="50" r="1" fill="white" opacity="0.4" />
        </pattern>
       </defs> <rect width="100%" height="100%" fill="url(#stories-pattern)" />
      </svg>
     </div>
     <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center text-white">
       <h1 class="text-4xl lg:text-5xl font-bold mb-4" id="stories-title">Share Your Story</h1>
       <p class="text-xl opacity-90 max-w-3xl mx-auto">Your journey matters. Share your experiences anonymously to inspire and support others in their mental wellness journey.</p>
      </div>
     </div>
    </div><!-- Stories Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16"><!-- Community Impact -->
     <div class="mb-16">
      <div class="text-center mb-12">
       <h2 class="text-3xl font-bold text-gray-900 mb-4">The Power of Shared Stories</h2>
       <p class="text-lg text-gray-600 max-w-3xl mx-auto">When we share our experiences, we create connections that heal and inspire. Every story shared is a beacon of hope for someone else.</p>
      </div>
      <div class="grid md:grid-cols-3 gap-8">
       <div class="text-center">
        <div class="w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6">
         <svg viewbox="0 0 100 100" class="w-12 h-12"><!-- Community illustration --> <circle cx="30" cy="40" r="8" fill="#3b82f6" /> <circle cx="50" cy="35" r="10" fill="#1e40af" /> <circle cx="70" cy="40" r="8" fill="#3b82f6" /> <path d="M20 65 Q30 55 40 65 Q50 55 60 65 Q70 55 80 65" stroke="#6b7280" stroke-width="2" fill="none" /> <circle cx="50" cy="70" r="3" fill="#dc2626" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-900 mb-3">Build Community</h3>
        <p class="text-gray-600">Connect with others who understand your journey and experiences.</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-gradient-to-br from-red-100 to-red-200 rounded-full flex items-center justify-center mx-auto mb-6">
         <svg viewbox="0 0 100 100" class="w-12 h-12"><!-- Inspiration illustration --> <path d="M50 20 L60 40 L80 40 L65 55 L70 75 L50 65 L30 75 L35 55 L20 40 L40 40 Z" fill="#dc2626" /> <circle cx="50" cy="50" r="15" fill="none" stroke="#dc2626" stroke-width="2" opacity="0.3" /> <circle cx="50" cy="50" r="25" fill="none" stroke="#dc2626" stroke-width="1" opacity="0.2" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-900 mb-3">Inspire Others</h3>
        <p class="text-gray-600">Your story can be the light that guides someone through their darkest moments.</p>
       </div>
       <div class="text-center">
        <div class="w-20 h-20 bg-gradient-to-br from-green-100 to-green-200 rounded-full flex items-center justify-center mx-auto mb-6">
         <svg viewbox="0 0 100 100" class="w-12 h-12"><!-- Healing illustration --> <path d="M50 15 Q65 30 50 45 Q35 30 50 15" fill="#10b981" /> <path d="M50 45 Q65 60 50 75 Q35 60 50 45" fill="#10b981" opacity="0.7" /> <circle cx="50" cy="50" r="20" fill="none" stroke="#10b981" stroke-width="2" opacity="0.3" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-900 mb-3">Find Healing</h3>
        <p class="text-gray-600">Sharing your story can be a powerful step in your own healing process.</p>
       </div>
      </div>
     </div><!-- Main Stories Section -->
     <div class="bg-white rounded-2xl shadow-xl overflow-hidden mb-12">
      <div class="bg-gradient-to-r from-gray-50 to-gray-100 p-8 border-b">
       <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center">
        <div>
         <h2 class="text-2xl font-bold text-gray-900 mb-2">Community Stories</h2>
         <p class="text-gray-600">Read inspiring stories from our community members</p>
        </div><button onclick="showStoryModal()" class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors mt-4 lg:mt-0 flex items-center">
         <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
         </svg> Share Your Story </button>
       </div>
      </div>
      <div class="p-8"><!-- Story Categories -->
       <div class="mb-8">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Browse by Category</h3>
        <div class="flex flex-wrap gap-3"><button class="px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium hover:bg-blue-200 transition-colors">Overcoming Anxiety</button> <button class="px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium hover:bg-green-200 transition-colors">Academic Stress</button> <button class="px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium hover:bg-purple-200 transition-colors">Personal Growth</button> <button class="px-4 py-2 bg-pink-100 text-pink-800 rounded-full text-sm font-medium hover:bg-pink-200 transition-colors">Relationships</button> <button class="px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium hover:bg-yellow-200 transition-colors">Self Care</button> <button class="px-4 py-2 bg-indigo-100 text-indigo-800 rounded-full text-sm font-medium hover:bg-indigo-200 transition-colors">General Inspiration</button>
        </div>
       </div><!-- Stories Feed -->
       <div id="stories-feed" class="space-y-8"><!-- Stories will be populated here -->
       </div>
       <div id="no-stories-message" class="text-center py-16 text-gray-500">
        <div class="mb-6">
         <svg class="w-24 h-24 mx-auto text-gray-300" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
         </svg>
        </div>
        <h3 class="text-xl font-semibold text-gray-400 mb-2">No stories shared yet</h3>
        <p class="text-gray-400 mb-6">Be the first to inspire others with your journey!</p><button onclick="showStoryModal()" class="bg-red-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-red-700 transition-colors">Share Your Story</button>
       </div>
      </div>
     </div><!-- Anonymous & Safe -->
     <div class="bg-gradient-to-r from-blue-50 to-blue-100 rounded-2xl p-8">
      <div class="text-center mb-8">
       <h2 class="text-3xl font-bold text-gray-900 mb-4">Your Privacy Matters</h2>
       <p class="text-lg text-gray-600 max-w-3xl mx-auto">We believe in creating a safe space where you can share authentically without fear of judgment.</p>
      </div>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
       <div class="text-center">
        <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
         <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
         </svg>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">100% Anonymous</h3>
        <p class="text-sm text-gray-600">No personal information is ever collected or stored</p>
       </div>
       <div class="text-center">
        <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
         <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
         </svg>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Safe Space</h3>
        <p class="text-sm text-gray-600">Moderated community with zero tolerance for negativity</p>
       </div>
       <div class="text-center">
        <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
         <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
         </svg>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Supportive</h3>
        <p class="text-sm text-gray-600">Community focused on encouragement and healing</p>
       </div>
       <div class="text-center">
        <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg">
         <svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
         </svg>
        </div>
        <h3 class="font-semibold text-gray-900 mb-2">Empowering</h3>
        <p class="text-sm text-gray-600">Your story has the power to change lives</p>
       </div>
      </div>
     </div>
    </div>
   </section><!-- Dashboard Section -->
   <section id="dashboard-section" class="section-content hidden">
    <div class="bg-white rounded-xl shadow-lg p-8">
     <h2 class="text-3xl font-bold text-gray-900 mb-6">Dashboard</h2><!-- Student Dashboard -->
     <div id="student-dashboard">
      <div class="grid md:grid-cols-1 gap-6 mb-8">
       <div class="bg-blue-50 rounded-lg p-6">
        <h3 class="text-lg font-semibold text-blue-900 mb-4">My Bookings</h3>
        <div id="student-bookings-list" class="space-y-4">
         <p class="text-gray-500 text-center py-4">Loading bookings...</p>
        </div>
       </div>
      </div>
     </div><!-- Staff Dashboard -->
     <div id="staff-dashboard" class="hidden">
      <div class="grid md:grid-cols-3 gap-6 mb-8">
       <div class="bg-green-50 rounded-lg p-6">
        <h3 class="text-lg font-semibold text-green-900 mb-2">Total Sessions</h3>
        <p class="text-3xl font-bold text-green-700" id="total-sessions">0</p>
       </div>
       <div class="bg-purple-50 rounded-lg p-6">
        <h3 class="text-lg font-semibold text-purple-900 mb-2">Active Stories</h3>
        <p class="text-3xl font-bold text-purple-700" id="total-stories">0</p>
       </div>
       <div class="bg-orange-50 rounded-lg p-6">
        <h3 class="text-lg font-semibold text-orange-900 mb-2">Library Books</h3>
        <p class="text-3xl font-bold text-orange-700" id="total-books">0</p>
       </div>
      </div>
      <!-- All Bookings for Wellness Team -->
      <div class="bg-blue-50 rounded-lg p-6 mb-6">
        <h3 class="text-lg font-semibold text-blue-900 mb-4">Student Bookings</h3>
        <div id="staff-bookings-list" class="space-y-4">
         <p class="text-gray-500 text-center py-4">Loading bookings...</p>
        </div>
      </div>
      <!-- Recent Activity -->
      <div class="bg-gray-50 rounded-lg p-6">
       <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Activity</h3>
       <div id="recent-activity" class="space-y-3"><!-- Recent activity will appear here -->
       </div>
      </div>
     </div>
    </div>
   </section>
  </main><!-- Add Book Modal -->
  <div id="book-modal" class="fixed inset-0 modal-backdrop hidden z-50 flex items-center justify-center p-4">
   <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-6">
    <h3 class="text-xl font-bold text-gray-900 mb-4">Add New Book</h3>
    <form id="add-book-form" class="space-y-4">
     <div><label for="book-title" class="block text-sm font-medium text-gray-700 mb-1">Book Title</label> <input type="text" id="book-title" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
     </div>
     <div><label for="book-author" class="block text-sm font-medium text-gray-700 mb-1">Author</label> <input type="text" id="book-author" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
     </div>
     <div><label for="book-category-select" class="block text-sm font-medium text-gray-700 mb-1">Category</label> <select id="book-category-select" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">Select category</option> <option value="psychology">Psychology</option> <option value="self-help">Self Help</option> <option value="mindfulness">Mindfulness</option> <option value="inspiration">Inspiration</option> </select>
     </div>
     <div><label for="book-description" class="block text-sm font-medium text-gray-700 mb-1">Description</label> <textarea id="book-description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
     </div>
     <div class="flex gap-3 pt-4"><button type="submit" id="save-book-btn" class="flex-1 bg-blue-900 text-white py-2 px-4 rounded-lg font-semibold hover:bg-blue-800 transition-colors flex items-center justify-center"> <span id="save-book-text">Add Book</span>
       <div id="save-book-loading" class="loading-spinner ml-2 hidden"></div></button> <button type="button" onclick="hideBookModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-semibold hover:bg-gray-400 transition-colors">Cancel</button>
     </div>
    </form>
   </div>
  </div><!-- Share Story Modal -->
  <div id="story-modal" class="fixed inset-0 modal-backdrop hidden z-50 flex items-center justify-center p-4">
   <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full p-6">
    <h3 class="text-xl font-bold text-gray-900 mb-4">Share Your Story</h3>
    <p class="text-sm text-gray-600 mb-4">Your story will be shared anonymously to inspire and help others.</p>
    <form id="share-story-form" class="space-y-4">
     <div><label for="story-title" class="block text-sm font-medium text-gray-700 mb-1">Story Title</label> <input type="text" id="story-title" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Give your story a title...">
     </div>
     <div><label for="story-content" class="block text-sm font-medium text-gray-700 mb-1">Your Story</label> <textarea id="story-content" rows="6" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Share your journey, what you learned, or how you overcame challenges..."></textarea>
     </div>
     <div><label for="story-category-select" class="block text-sm font-medium text-gray-700 mb-1">Category</label> <select id="story-category-select" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"> <option value="">Select category</option> <option value="overcoming-anxiety">Overcoming Anxiety</option> <option value="academic-stress">Academic Stress</option> <option value="personal-growth">Personal Growth</option> <option value="relationships">Relationships</option> <option value="self-care">Self Care</option> <option value="inspiration">General Inspiration</option> </select>
     </div>
     <div class="flex gap-3 pt-4"><button type="submit" id="share-story-btn" class="flex-1 bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center justify-center"> <span id="share-story-text">Share Story</span>
       <div id="share-story-loading" class="loading-spinner ml-2 hidden"></div></button> <button type="button" onclick="hideStoryModal()" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-semibold hover:bg-gray-400 transition-colors">Cancel</button>
     </div>
    </form>
   </div>
  </div>
  <script>
        // Configuration and state
        let currentSection = 'home';
        let currentUserRole = 'student';
        let allData = [];
        let isLoading = false;
        let currentUser = null; // Store logged-in user info

        // Default configuration
        const defaultConfig = {
            platform_title: "MindBridge",
            welcome_message: "Your mental wellness journey starts here",
            booking_title: "Book a Session",
            library_title: "Wellness Library",
            stories_title: "Share Your Story"
        };

        // Data handler for SDK
        const dataHandler = {
            onDataChanged(data) {
                allData = data;
                updateUI();
                updateCounts();
                updateDashboard();
            }
        };

        // ========== AUTHENTICATION FUNCTIONS ==========
        
        // Get CSRF token from cookie
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }

        // Validation helpers
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                return false;
            }
            
            // Check for common educational domains (optional - can be customized)
            const eduDomains = ['.edu', '.ac.', 'student', 'university', 'college'];
            const isEduEmail = eduDomains.some(domain => email.toLowerCase().includes(domain));
            
            // For now, just warn if not edu email but still allow it
            // If you want to enforce edu emails only, uncomment the next line:
            // return isEduEmail;
            
            return true;
        }
        
        function validateStudentEmail(email) {
            // Strict validation for ALU student email addresses only
            const emailRegex = /^[^\s@]+@alustudent\.com$/i;
            
            if (!emailRegex.test(email)) {
                return { valid: false, message: 'Please use your ALU student email (@alustudent.com)' };
            }
            
            return { valid: true };
        }

        function validatePassword(password) {
            if (password.length < 8) {
                return { valid: false, message: 'Password must be at least 8 characters' };
            }
            if (!/[A-Z]/.test(password)) {
                return { valid: false, message: 'Password must contain at least one uppercase letter' };
            }
            if (!/[a-z]/.test(password)) {
                return { valid: false, message: 'Password must contain at least one lowercase letter' };
            }
            if (!/[0-9]/.test(password)) {
                return { valid: false, message: 'Password must contain at least one number' };
            }
            return { valid: true };
        }

        function validatePhone(phone) {
            // Remove spaces, dashes, parentheses
            const cleaned = phone.replace(/[\s\-\(\)]/g, '');
            // Check if it's 10 digits (US format) or 11 digits (with country code)
            return /^[0-9]{10,11}$/.test(cleaned);
        }

        // Show/hide modals
        function showLoginModal() {
            document.getElementById('login-modal').classList.remove('hidden');
        }

        function hideLoginModal() {
            document.getElementById('login-modal').classList.add('hidden');
            document.getElementById('login-form').reset();
        }

        function showRegisterModal() {
            document.getElementById('register-modal').classList.remove('hidden');
        }

        function hideRegisterModal() {
            document.getElementById('register-modal').classList.add('hidden');
            document.getElementById('register-form').reset();
        }

        function switchToRegister() {
            hideLoginModal();
            showRegisterModal();
        }

        function switchToLogin() {
            hideRegisterModal();
            showLoginModal();
        }

        // Handle login - function to be called after DOM loads
        function attachAuthListeners() {
            // Login form
            document.getElementById('login-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('login-submit-btn');
            const btnText = document.getElementById('login-btn-text');
            const loading = document.getElementById('login-loading');
            
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value;
            
            // Validation
            if (!username || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (username.length < 3) {
                showToast('Username must be at least 3 characters', 'error');
                return;
            }
            
            btn.disabled = true;
            btnText.textContent = 'Logging in...';
            loading.classList.remove('hidden');
            
            // Setup timeout
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 second timeout
            
            try {
                const response = await fetch('/users/api/login/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({ username, password }),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                // Check HTTP status
                if (!response.ok) {
                    if (response.status === 401) {
                        showToast('Invalid username or password', 'error');
                    } else if (response.status === 429) {
                        showToast('Too many login attempts. Please try again later.', 'error');
                    } else if (response.status >= 500) {
                        showToast('Server error. Please try again later.', 'error');
                    } else {
                        const data = await response.json().catch(() => ({}));
                        showToast(data.error || 'Login failed. Please try again.', 'error');
                    }
                    return;
                }
                
                const data = await response.json();
                
                if (data.ok) {
                    currentUser = {
                        username: username,
                        role: data.role
                    };
                    updateAuthUI();
                    hideLoginModal();
                    showToast('Welcome back! Logged in successfully.', 'success');
                } else {
                    showToast(data.error || 'Login failed. Please try again.', 'error');
                }
            } catch (error) {
                clearTimeout(timeoutId);
                
                if (error.name === 'AbortError') {
                    showToast('Request timed out. Please check your connection.', 'error');
                } else if (error.message.includes('Failed to fetch')) {
                    showToast('Network error. Please check your internet connection.', 'error');
                } else {
                    showToast('An unexpected error occurred. Please try again.', 'error');
                }
                console.error('Login error:', error);
            } finally {
                btn.disabled = false;
                btnText.textContent = 'Login';
                loading.classList.add('hidden');
            }
        });

            // Register form
            document.getElementById('register-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const btn = document.getElementById('register-submit-btn');
            const btnText = document.getElementById('register-btn-text');
            const loading = document.getElementById('register-loading');
            
            // Get form values
            const username = document.getElementById('register-username').value.trim();
            const email = document.getElementById('register-email').value.trim();
            const firstName = document.getElementById('register-firstname').value.trim();
            const lastName = document.getElementById('register-lastname').value.trim();
            const studentId = document.getElementById('register-studentid').value.trim();
            const phone = document.getElementById('register-phone').value.trim();
            const password = document.getElementById('register-password').value;
            const password2 = document.getElementById('register-password2').value;
            
            // Validation - only check required fields
            if (!username || !email || !firstName || !lastName || !password || !password2) {
                showToast('Please fill in all required fields', 'error');
                return;
            }
            
            if (username.length < 3) {
                showToast('Username must be at least 3 characters', 'error');
                return;
            }
            
            if (!/^[a-zA-Z0-9_]+$/.test(username)) {
                showToast('Username can only contain letters, numbers, and underscores', 'error');
                return;
            }
            
            // Validate student email
            const emailValidation = validateStudentEmail(email);
            if (!emailValidation.valid) {
                showToast(emailValidation.message, 'error');
                return;
            }
            
            // Optional: validate student ID only if provided
            if (studentId && studentId.length < 5) {
                showToast('Student ID must be at least 5 characters', 'error');
                return;
            }
            
            // Optional: validate phone only if provided
            if (phone && !validatePhone(phone)) {
                showToast('Please enter a valid phone number (10-11 digits)', 'error');
                return;
            }
            
            const passwordValidation = validatePassword(password);
            if (!passwordValidation.valid) {
                showToast(passwordValidation.message, 'error');
                return;
            }
            
            if (password !== password2) {
                showToast('Passwords do not match!', 'error');
                return;
            }
            
            btn.disabled = true;
            btnText.textContent = 'Creating account...';
            loading.classList.remove('hidden');
            
            const formData = {
                username: username,
                email: email,
                first_name: firstName,
                last_name: lastName,
                student_id: studentId,
                phone_number: phone,
                password: password,
                password2: password2,
                role: 'student'
            };
            
            // Setup timeout
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 second timeout
            
            try {
                const response = await fetch('/users/api/register/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify(formData),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                console.log('Registration response status:', response.status);
                
                // Check HTTP status
                if (!response.ok) {
                    if (response.status === 400) {
                        const data = await response.json().catch(() => ({}));
                        // Handle specific validation errors
                        if (data.errors) {
                            const errorMessages = Object.entries(data.errors)
                                .map(([field, errors]) => `${field}: ${Array.isArray(errors) ? errors.join(', ') : errors}`)
                                .join('\n');
                            showToast(errorMessages || data.error || 'Validation failed', 'error');
                        } else {
                            showToast(data.error || 'Invalid registration data', 'error');
                        }
                    } else if (response.status === 409) {
                        showToast('Username or email already exists', 'error');
                    } else if (response.status >= 500) {
                        showToast('Server error. Please try again later.', 'error');
                    } else {
                        const data = await response.json().catch(() => ({}));
                        showToast(data.error || 'Registration failed. Please try again.', 'error');
                    }
                    return;
                }
                
                const data = await response.json();
                console.log('Registration response data:', data);
                
                if (data.ok) {
                    currentUser = {
                        username: formData.username,
                        role: data.role
                    };
                    updateAuthUI();
                    hideRegisterModal();
                    showToast('Account created successfully! Welcome to MindBridge.', 'success');
                } else {
                    showToast(data.error || 'Registration failed. Please try again.', 'error');
                }
            } catch (error) {
                clearTimeout(timeoutId);
                
                if (error.name === 'AbortError') {
                    showToast('Request timed out. Please check your connection.', 'error');
                } else if (error.message.includes('Failed to fetch')) {
                    showToast('Network error. Please check your internet connection.', 'error');
                } else {
                    showToast('An unexpected error occurred. Please try again.', 'error');
                }
                console.error('Registration error:', error);
            } finally {
                btn.disabled = false;
                btnText.textContent = 'Create Account';
                loading.classList.add('hidden');
            }
        });
        }

        // Handle logout
        async function handleLogout() {
            // Setup timeout
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 10000); // 10 second timeout
            
            try {
                const response = await fetch('/users/logout/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                
                currentUser = null;
                updateAuthUI();
                showSection('home');
                showToast('Logged out successfully.', 'success');
            } catch (error) {
                clearTimeout(timeoutId);
                console.error('Logout error:', error);
                // Even if server request fails, clear local state
                currentUser = null;
                updateAuthUI();
                showSection('home');
                showToast('Logged out.', 'success');
            }
        }

        // Update UI based on auth state
        function updateAuthUI() {
            const authButtons = document.getElementById('auth-buttons');
            const userMenu = document.getElementById('user-menu');
            const userName = document.getElementById('user-name');
            const userInitial = document.getElementById('user-initial');
            
            if (currentUser) {
                // User is logged in
                authButtons.classList.add('hidden');
                userMenu.classList.remove('hidden');
                userName.textContent = currentUser.username;
                userInitial.textContent = currentUser.username.charAt(0).toUpperCase();
                currentUserRole = currentUser.role;
                
                // Pre-fill booking form if elements exist
                const studentNameInput = document.getElementById('student-name');
                const studentEmailInput = document.getElementById('student-email');
                if (studentNameInput && !studentNameInput.value) {
                    studentNameInput.value = currentUser.username;
                }
                if (studentEmailInput && !studentEmailInput.value) {
                    studentEmailInput.value = currentUser.username + '@alustudent.com';
                }
                
                // Show/hide role-based features
                const addBookBtn = document.getElementById('add-book-btn');
                const studentDashboard = document.getElementById('student-dashboard');
                const staffDashboard = document.getElementById('staff-dashboard');
                
                if (addBookBtn && studentDashboard && staffDashboard) {
                    if (currentUserRole === 'wellness_team') {
                        addBookBtn.classList.remove('hidden');
                        studentDashboard.classList.add('hidden');
                        staffDashboard.classList.remove('hidden');
                    } else {
                        addBookBtn.classList.add('hidden');
                        studentDashboard.classList.remove('hidden');
                        staffDashboard.classList.add('hidden');
                    }
                }
            } else {
                // User is not logged in
                authButtons.classList.remove('hidden');
                userMenu.classList.add('hidden');
            }
        }

        // Check if user needs to be logged in for certain actions
        function requireAuth(action) {
            if (!currentUser) {
                showToast('Please login to ' + action, 'error');
                showLoginModal();
                return false;
            }
            return true;
        }

        // ========== END AUTHENTICATION FUNCTIONS ==========

        // Initialize SDK and app
        async function initializeApp() {
            try {
                // Initialize Element SDK
                if (window.elementSdk) {
                    await window.elementSdk.init({
                        defaultConfig,
                        onConfigChange: async (config) => {
                            document.getElementById('platform-title').textContent = config.platform_title || defaultConfig.platform_title;
                            document.getElementById('welcome-message').textContent = config.welcome_message || defaultConfig.welcome_message;
                            document.getElementById('booking-title').textContent = config.booking_title || defaultConfig.booking_title;
                            document.getElementById('library-title').textContent = config.library_title || defaultConfig.library_title;
                            document.getElementById('stories-title').textContent = config.stories_title || defaultConfig.stories_title;
                        },
                        mapToCapabilities: (config) => ({
                            recolorables: [
                                {
                                    get: () => config.primary_color || "#1e3a8a",
                                    set: (value) => {
                                        config.primary_color = value;
                                        window.elementSdk.setConfig({ primary_color: value });
                                    }
                                },
                                {
                                    get: () => config.accent_color || "#dc2626",
                                    set: (value) => {
                                        config.accent_color = value;
                                        window.elementSdk.setConfig({ accent_color: value });
                                    }
                                },
                                {
                                    get: () => config.background_color || "#f9fafb",
                                    set: (value) => {
                                        config.background_color = value;
                                        window.elementSdk.setConfig({ background_color: value });
                                    }
                                }
                            ],
                            borderables: [],
                            fontEditable: {
                                get: () => config.font_family || "Inter",
                                set: (value) => {
                                    config.font_family = value;
                                    window.elementSdk.setConfig({ font_family: value });
                                }
                            },
                            fontSizeable: {
                                get: () => config.font_size || 16,
                                set: (value) => {
                                    config.font_size = value;
                                    window.elementSdk.setConfig({ font_size: value });
                                }
                            }
                        }),
                        mapToEditPanelValues: (config) => new Map([
                            ["platform_title", config.platform_title || defaultConfig.platform_title],
                            ["welcome_message", config.welcome_message || defaultConfig.welcome_message],
                            ["booking_title", config.booking_title || defaultConfig.booking_title],
                            ["library_title", config.library_title || defaultConfig.library_title],
                            ["stories_title", config.stories_title || defaultConfig.stories_title]
                        ])
                    });
                }

                // Initialize Data SDK
                if (window.dataSdk) {
                    const result = await window.dataSdk.init(dataHandler);
                    if (!result.isOk) {
                        console.error("Failed to initialize data SDK");
                    }
                }

                // Set minimum date for booking
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('session-date').min = today;

                // Setup event listeners
                setupEventListeners();
                
                // Attach authentication event listeners
                attachAuthListeners();
                
                // Initialize authentication UI
                updateAuthUI();

            } catch (error) {
                console.error("Failed to initialize app:", error);
            }
        }

        // Setup event listeners
        function setupEventListeners() {
            // Booking form
            document.getElementById('booking-form').addEventListener('submit', handleBookingSubmit);
            
            // Add book form
            document.getElementById('add-book-form').addEventListener('submit', handleAddBook);
            
            // Share story form
            document.getElementById('share-story-form').addEventListener('submit', handleShareStory);
            
            // Search and filter
            document.getElementById('book-search').addEventListener('input', filterBooks);
            document.getElementById('book-category').addEventListener('change', filterBooks);
        }

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section-content').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName + '-section').classList.remove('hidden');
            currentSection = sectionName;
            
            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('text-red-300');
            });
            
            // Update UI based on section
            if (sectionName === 'library') {
                filterBooks();
            } else if (sectionName === 'stories') {
                renderStories();
            } else if (sectionName === 'dashboard') {
                // Show appropriate dashboard based on user role
                const studentDash = document.getElementById('student-dashboard');
                const staffDash = document.getElementById('staff-dashboard');
                
                if (currentUser && currentUser.role === 'wellness_team') {
                    if (studentDash) studentDash.classList.add('hidden');
                    if (staffDash) staffDash.classList.remove('hidden');
                } else {
                    if (studentDash) studentDash.classList.remove('hidden');
                    if (staffDash) staffDash.classList.add('hidden');
                }
                
                loadBookings();
            }
        }

        function updateUserRole() {
            const role = document.getElementById('user-role').value;
            currentUserRole = role;
            
            // Show/hide staff-only features
            const addBookBtn = document.getElementById('add-book-btn');
            const studentDashboard = document.getElementById('student-dashboard');
            const staffDashboard = document.getElementById('staff-dashboard');
            
            if (role === 'staff') {
                addBookBtn.classList.remove('hidden');
                studentDashboard.classList.add('hidden');
                staffDashboard.classList.remove('hidden');
            } else {
                addBookBtn.classList.add('hidden');
                studentDashboard.classList.remove('hidden');
                staffDashboard.classList.add('hidden');
            }
            
            updateDashboard();
        }

        // Booking functions
        async function handleBookingSubmit(e) {
            e.preventDefault();
            
            if (!requireAuth('book a session')) {
                return;
            }
            
            const btn = document.getElementById('book-session-btn');
            const btnText = document.getElementById('book-btn-text');
            const loading = document.getElementById('book-loading');
            
            // Show loading state
            btn.disabled = true;
            btnText.textContent = 'Booking...';
            loading.classList.remove('hidden');
            
            // Prepare booking data
            const timeValue = document.getElementById('session-time').value;
            // Convert "09:00 AM" to 24-hour "09:00:00" format
            let convertedTime = timeValue;
            if (timeValue.includes('AM') || timeValue.includes('PM')) {
                const timeParts = timeValue.match(/(\d+):(\d+)\s*(AM|PM)/i);
                if (timeParts) {
                    let hours = parseInt(timeParts[1]);
                    const minutes = timeParts[2];
                    const period = timeParts[3].toUpperCase();
                    
                    if (period === 'PM' && hours !== 12) hours += 12;
                    if (period === 'AM' && hours === 12) hours = 0;
                    
                    convertedTime = `${hours.toString().padStart(2, '0')}:${minutes}:00`;
                }
            } else {
                convertedTime = timeValue + ':00';
            }
            
            const bookingData = {
                full_name: document.getElementById('student-name').value,
                email: document.getElementById('student-email').value,
                phone_number: '+250000000000', // Default phone
                date: document.getElementById('session-date').value,
                time: convertedTime,
                session_type: 'individual',
                reason: document.getElementById('specialist-select').value,
                additional_notes: document.getElementById('session-notes').value
            };
            
            try {
                console.log('Sending booking data:', bookingData);
                const response = await fetch('/api/bookings/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify(bookingData)
                });
                
                if (!response.ok) {
                    let error;
                    const contentType = response.headers.get('content-type');
                    
                    if (contentType && contentType.includes('application/json')) {
                        error = await response.json();
                        console.error('Booking error response:', error);
                        console.error('Full error object:', JSON.stringify(error, null, 2));
                        
                        // Build detailed error message
                        let errorMessage = 'Booking failed: ';
                        if (typeof error === 'object') {
                            if (error.detail) {
                                errorMessage += error.detail;
                            } else {
                                // Show all field errors
                                errorMessage += Object.entries(error)
                                    .map(([field, msgs]) => `${field}: ${Array.isArray(msgs) ? msgs.join(', ') : msgs}`)
                                    .join('; ');
                            }
                        } else {
                            errorMessage += error || 'Unknown error';
                        }
                        throw new Error(errorMessage);
                    } else {
                        // Server returned HTML error page
                        const errorText = await response.text();
                        console.error('Server error (HTML):', errorText.substring(0, 500));
                        throw new Error(`Server error (${response.status}). Check browser console and Django terminal for details.`);
                    }
                }
                
                const data = await response.json();
                showToast("Session booked successfully! You'll receive a confirmation once approved.", "success");
                document.getElementById('booking-form').reset();
                
                // Refresh bookings if on dashboard
                if (currentSection === 'dashboard') {
                    await loadBookings();
                }
                
            } catch (error) {
                showToast(error.message || 'Failed to book session. Please try again.', 'error');
                console.error('Booking error:', error);
            } finally {
                btn.disabled = false;
                btnText.textContent = 'Book Session';
                loading.classList.add('hidden');
            }
        }
        
        // Load user's bookings
        async function loadBookings() {
            if (!currentUser) return;
            
            console.log('Loading bookings for user:', currentUser);
            
            try {
                const response = await fetch('/api/bookings/', {
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                });
                
                if (!response.ok) throw new Error('Failed to load bookings');
                
                const bookings = await response.json();
                console.log('Loaded bookings:', bookings);
                displayBookings(bookings.results || bookings);
                
            } catch (error) {
                console.error('Error loading bookings:', error);
                showToast('Failed to load bookings', 'error');
            }
        }
        
        // Display bookings in dashboard
        function displayBookings(bookings) {
            // Determine which container to use based on user role
            const isWellnessTeam = currentUser && currentUser.role === 'wellness_team';
            const containerId = isWellnessTeam ? 'staff-bookings-list' : 'student-bookings-list';
            const container = document.getElementById(containerId);
            
            if (!container) {
                console.error('Bookings container not found:', containerId);
                return;
            }
            
            console.log('Displaying bookings:', bookings);
            console.log('Current user:', currentUser);
            console.log('Using container:', containerId);
            
            if (bookings.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">No bookings yet. Book your first session!</p>';
                return;
            }
            
            console.log('Is wellness team?', isWellnessTeam);
            
            container.innerHTML = bookings.map(booking => {
                console.log('Rendering booking:', booking);
                return `
                <div class="bg-white rounded-lg shadow p-6 border-l-4 ${getStatusColor(booking.status)}">
                    <div class="flex justify-between items-start mb-4">
                        <div>
                            <h4 class="font-semibold text-gray-900">${formatDate(booking.date)} at ${formatTime(booking.time)}</h4>
                            <p class="text-sm text-gray-600">${booking.session_type}</p>
                            ${isWellnessTeam ? `<p class="text-sm text-blue-600 mt-1">Student: ${booking.student_name || booking.student_username}</p>` : ''}
                        </div>
                        <span class="px-3 py-1 rounded-full text-xs font-semibold ${getStatusBadge(booking.status)}">
                            ${booking.status.toUpperCase()}
                        </span>
                    </div>
                    <p class="text-gray-700 mb-2"><strong>Reason:</strong> ${booking.reason}</p>
                    ${booking.additional_notes ? `<p class="text-gray-600 text-sm mb-2">${booking.additional_notes}</p>` : ''}
                    
                    ${booking.meet_link ? `
                        <div class="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"/>
                                    </svg>
                                    <span class="text-green-800 font-medium">Google Meet Ready</span>
                                </div>
                                <a href="${booking.meet_link}" target="_blank" 
                                   class="bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors">
                                    Join Meeting
                                </a>
                            </div>
                        </div>
                    ` : booking.status === 'approved' ? `
                        <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <p class="text-blue-800 text-sm">Meeting link will be provided shortly</p>
                        </div>
                    ` : ''}
                    
                    ${isWellnessTeam && booking.status === 'pending' ? `
                        <div class="mt-4 flex gap-2">
                            <button onclick="approveBooking(${booking.id})" 
                                    class="flex-1 bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-green-700 transition-colors">
                                 Approve & Generate Meet Link
                            </button>
                            <button onclick="rejectBooking(${booking.id})" 
                                    class="flex-1 bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-red-700 transition-colors">
                                 Reject
                            </button>
                        </div>
                    ` : !isWellnessTeam && (booking.status === 'pending' || booking.status === 'approved') ? `
                        <button onclick="cancelBooking(${booking.id})" 
                                class="mt-4 text-red-600 hover:text-red-800 text-sm font-medium">
                            Cancel Booking
                        </button>
                    ` : ''}
                </div>
            `;
            }).join('');
        }
        
        // Cancel booking
        async function cancelBooking(bookingId) {
            if (!confirm('Are you sure you want to cancel this booking?')) return;
            
            try {
                const response = await fetch(`/api/bookings/${bookingId}/cancel/`, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                });
                
                if (!response.ok) throw new Error('Failed to cancel booking');
                
                showToast('Booking cancelled successfully', 'success');
                await loadBookings();
                
            } catch (error) {
                showToast(error.message || 'Failed to cancel booking', 'error');
                console.error('Cancel error:', error);
            }
        }
        
        // Approve booking (Wellness Team only)
        async function approveBooking(bookingId) {
            if (!confirm('Approve this booking? A Google Meet link will be generated if credentials are configured.')) return;
            
            try {
                const response = await fetch(`/api/bookings/${bookingId}/approve/`, {
                    method: 'POST',
                    headers: {
                        'X-CSRFToken': getCookie('csrftoken')
                    }
                });
                
                if (!response.ok) throw new Error('Failed to approve booking');
                
                const data = await response.json();
                if (data.meet_link) {
                    showToast('Booking approved! Google Meet link generated successfully.', 'success');
                } else {
                    showToast('Booking approved! (Google Meet link generation skipped - credentials not configured)', 'success');
                }
                await loadBookings();
                
            } catch (error) {
                showToast(error.message || 'Failed to approve booking', 'error');
                console.error('Approve error:', error);
            }
        }
        
        // Reject booking (Wellness Team only)
        async function rejectBooking(bookingId) {
            const reason = prompt('Please provide a reason for rejection (optional):');
            if (reason === null) return; // User cancelled
            
            try {
                const response = await fetch(`/api/bookings/${bookingId}/reject/`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': getCookie('csrftoken')
                    },
                    body: JSON.stringify({ notes: reason })
                });
                
                if (!response.ok) throw new Error('Failed to reject booking');
                
                showToast('Booking rejected', 'success');
                await loadBookings();
                
            } catch (error) {
                showToast(error.message || 'Failed to reject booking', 'error');
                console.error('Reject error:', error);
            }
        }
        
        // Helper functions
        function getStatusColor(status) {
            const colors = {
                'pending': 'border-yellow-500',
                'approved': 'border-green-500',
                'rejected': 'border-red-500',
                'completed': 'border-blue-500',
                'cancelled': 'border-gray-500'
            };
            return colors[status] || 'border-gray-500';
        }
        
        function getStatusBadge(status) {
            const badges = {
                'pending': 'bg-yellow-100 text-yellow-800',
                'approved': 'bg-green-100 text-green-800',
                'rejected': 'bg-red-100 text-red-800',
                'completed': 'bg-blue-100 text-blue-800',
                'cancelled': 'bg-gray-100 text-gray-800'
            };
            return badges[status] || 'bg-gray-100 text-gray-800';
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
        }
        
        function formatTime(timeString) {
            const [hours, minutes] = timeString.split(':');
            const hour = parseInt(hours);
            const ampm = hour >= 12 ? 'PM' : 'AM';
            const displayHour = hour % 12 || 12;
            return `${displayHour}:${minutes} ${ampm}`;
        }

        // Library functions
        function showAddBookModal() {
            document.getElementById('book-modal').classList.remove('hidden');
        }

        function hideBookModal() {
            document.getElementById('book-modal').classList.add('hidden');
            document.getElementById('add-book-form').reset();
        }

        async function handleAddBook(e) {
            e.preventDefault();
            
            if (allData.length >= 999) {
                showToast("Maximum limit of 999 items reached. Please delete some items first.", "error");
                return;
            }
            
            const btn = document.getElementById('save-book-btn');
            const btnText = document.getElementById('save-book-text');
            const loading = document.getElementById('save-book-loading');
            
            // Show loading state
            btn.disabled = true;
            btnText.textContent = 'Adding...';
            loading.classList.remove('hidden');
            
            try {
                const bookData = {
                    id: Date.now().toString(),
                    type: 'book',
                    title: document.getElementById('book-title').value,
                    content: document.getElementById('book-description').value,
                    author: document.getElementById('book-author').value,
                    date: new Date().toISOString(),
                    status: 'available',
                    category: document.getElementById('book-category-select').value,
                    anonymous: false
                };

                const result = await window.dataSdk.create(bookData);
                
                if (result.isOk) {
                    showToast("Book added successfully!", "success");
                    hideBookModal();
                } else {
                    showToast("Failed to add book. Please try again.", "error");
                }
            } catch (error) {
                showToast("An error occurred. Please try again.", "error");
            } finally {
                // Reset button state
                btn.disabled = false;
                btnText.textContent = 'Add Book';
                loading.classList.add('hidden');
            }
        }

        function filterBooks() {
            const searchTerm = document.getElementById('book-search').value.toLowerCase();
            const selectedCategory = document.getElementById('book-category').value;
            
            const books = allData.filter(item => item.type === 'book');
            let filteredBooks = books;
            
            if (searchTerm) {
                filteredBooks = filteredBooks.filter(book => 
                    book.title.toLowerCase().includes(searchTerm) ||
                    book.author.toLowerCase().includes(searchTerm)
                );
            }
            
            if (selectedCategory) {
                filteredBooks = filteredBooks.filter(book => book.category === selectedCategory);
            }
            
            renderBooks(filteredBooks);
        }

        function renderBooks(books = null) {
            const booksGrid = document.getElementById('books-grid');
            const noBooksMessage = document.getElementById('no-books-message');
            
            if (!books) {
                books = allData.filter(item => item.type === 'book');
            }
            
            if (books.length === 0) {
                booksGrid.classList.add('hidden');
                noBooksMessage.classList.remove('hidden');
                return;
            }
            
            booksGrid.classList.remove('hidden');
            noBooksMessage.classList.add('hidden');
            
            const categoryColors = {
                'psychology': 'from-blue-400 to-blue-600',
                'self-help': 'from-green-400 to-green-600',
                'mindfulness': 'from-purple-400 to-purple-600',
                'inspiration': 'from-red-400 to-red-600'
            };
            
            booksGrid.innerHTML = books.map(book => {
                const colorClass = categoryColors[book.category] || 'from-gray-400 to-gray-600';
                return `
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden card-hover">
                        <div class="h-48 bg-gradient-to-br ${colorClass} flex items-center justify-center">
                            <svg viewBox="0 0 200 250" class="w-32 h-40">
                                <rect x="20" y="20" width="160" height="210" rx="8" fill="white" opacity="0.9"/>
                                <rect x="30" y="40" width="140" height="4" fill="currentColor" opacity="0.8"/>
                                <rect x="30" y="50" width="${Math.min(140, book.title.length * 8)}" height="3" fill="#6b7280"/>
                                <rect x="30" y="60" width="${Math.min(140, book.author.length * 6)}" height="3" fill="#6b7280"/>
                                <circle cx="100" cy="130" r="25" fill="currentColor" opacity="0.2"/>
                                <rect x="85" y="115" width="30" height="30" rx="4" fill="currentColor" opacity="0.6"/>
                            </svg>
                        </div>
                        <div class="p-6">
                            <h3 class="font-bold text-gray-900 mb-2 line-clamp-2">${book.title}</h3>
                            <p class="text-sm text-gray-600 mb-3">by ${book.author}</p>
                            <span class="inline-block bg-${book.category === 'psychology' ? 'blue' : book.category === 'self-help' ? 'green' : book.category === 'mindfulness' ? 'purple' : 'red'}-100 text-${book.category === 'psychology' ? 'blue' : book.category === 'self-help' ? 'green' : book.category === 'mindfulness' ? 'purple' : 'red'}-800 text-xs px-2 py-1 rounded-full mb-3 capitalize">${book.category.replace('-', ' ')}</span>
                            <p class="text-sm text-gray-500 line-clamp-3">${book.content || 'A valuable resource for mental wellness and personal growth.'}</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Stories functions
        function showStoryModal() {
            document.getElementById('story-modal').classList.remove('hidden');
        }

        function hideStoryModal() {
            document.getElementById('story-modal').classList.add('hidden');
            document.getElementById('share-story-form').reset();
        }

        async function handleShareStory(e) {
            e.preventDefault();
            
            if (allData.length >= 999) {
                showToast("Maximum limit of 999 stories reached. Please contact support.", "error");
                return;
            }
            
            const btn = document.getElementById('share-story-btn');
            const btnText = document.getElementById('share-story-text');
            const loading = document.getElementById('share-story-loading');
            
            // Show loading state
            btn.disabled = true;
            btnText.textContent = 'Sharing...';
            loading.classList.remove('hidden');
            
            try {
                const storyData = {
                    id: Date.now().toString(),
                    type: 'story',
                    title: document.getElementById('story-title').value,
                    content: document.getElementById('story-content').value,
                    author: 'Anonymous',
                    date: new Date().toISOString(),
                    status: 'published',
                    category: document.getElementById('story-category-select').value,
                    anonymous: true
                };

                const result = await window.dataSdk.create(storyData);
                
                if (result.isOk) {
                    showToast("Story shared successfully! Thank you for inspiring others.", "success");
                    hideStoryModal();
                } else {
                    showToast("Failed to share story. Please try again.", "error");
                }
            } catch (error) {
                showToast("An error occurred. Please try again.", "error");
            } finally {
                // Reset button state
                btn.disabled = false;
                btnText.textContent = 'Share Story';
                loading.classList.add('hidden');
            }
        }

        function renderStories() {
            const storiesFeed = document.getElementById('stories-feed');
            const noStoriesMessage = document.getElementById('no-stories-message');
            
            const stories = allData.filter(item => item.type === 'story').sort((a, b) => new Date(b.date) - new Date(a.date));
            
            if (stories.length === 0) {
                storiesFeed.classList.add('hidden');
                noStoriesMessage.classList.remove('hidden');
                return;
            }
            
            storiesFeed.classList.remove('hidden');
            noStoriesMessage.classList.add('hidden');
            
            storiesFeed.innerHTML = stories.map(story => `
                <div class="story-card rounded-lg p-6 fade-in">
                    <div class="flex items-start justify-between mb-3">
                        <h3 class="text-lg font-semibold text-gray-900">${story.title}</h3>
                        <span class="text-xs text-gray-500">${new Date(story.date).toLocaleDateString()}</span>
                    </div>
                    <span class="inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full mb-3">${story.category.replace('-', ' ')}</span>
                    <p class="text-gray-700 leading-relaxed">${story.content}</p>
                    <div class="mt-4 flex items-center text-sm text-gray-500">
                        <span class="mr-4"> Anonymous</span>
                        <span> Inspiring</span>
                    </div>
                </div>
            `).join('');
        }

        // Dashboard functions
        function updateDashboard() {
            if (currentUserRole === 'student') {
                updateStudentDashboard();
            } else {
                updateStaffDashboard();
            }
        }

        function updateStudentDashboard() {
            const mySessions = document.getElementById('my-sessions');
            const myReadingList = document.getElementById('my-reading-list');
            
            const sessions = allData.filter(item => item.type === 'booking');
            const books = allData.filter(item => item.type === 'book').slice(0, 3);
            
            // My sessions
            if (sessions.length === 0) {
                mySessions.innerHTML = '<p class="text-gray-500 text-sm">No upcoming sessions</p>';
            } else {
                mySessions.innerHTML = sessions.slice(0, 3).map(session => `
                    <div class="bg-white rounded-lg p-3 border border-blue-200">
                        <p class="font-medium text-sm">${session.specialist}</p>
                        <p class="text-xs text-gray-600">${session.date} at ${session.time_slot}</p>
                    </div>
                `).join('');
            }
            
            // Reading list
            if (books.length === 0) {
                myReadingList.innerHTML = '<p class="text-gray-500 text-sm">No books available</p>';
            } else {
                myReadingList.innerHTML = books.map(book => `
                    <div class="bg-white rounded-lg p-3 border border-red-200">
                        <p class="font-medium text-sm">${book.title}</p>
                        <p class="text-xs text-gray-600">by ${book.author}</p>
                    </div>
                `).join('');
            }
        }

        function updateStaffDashboard() {
            const recentActivity = document.getElementById('recent-activity');
            
            const recentItems = allData
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 5);
            
            if (recentItems.length === 0) {
                recentActivity.innerHTML = '<p class="text-gray-500 text-sm">No recent activity</p>';
            } else {
                recentActivity.innerHTML = recentItems.map(item => `
                    <div class="bg-white rounded-lg p-3 border border-gray-200">
                        <div class="flex justify-between items-start">
                            <div>
                                <p class="font-medium text-sm">${item.title}</p>
                                <p class="text-xs text-gray-600">${item.type}  ${new Date(item.date).toLocaleDateString()}</p>
                            </div>
                            <span class="text-xs px-2 py-1 rounded-full ${
                                item.type === 'booking' ? 'bg-blue-100 text-blue-800' :
                                item.type === 'book' ? 'bg-green-100 text-green-800' :
                                'bg-purple-100 text-purple-800'
                            }">${item.type}</span>
                        </div>
                    </div>
                `).join('');
            }
        }

        // UI update functions
        function updateUI() {
            if (currentSection === 'library') {
                renderBooks();
            } else if (currentSection === 'stories') {
                renderStories();
            }
        }

        function updateCounts() {
            const sessions = allData.filter(item => item.type === 'booking');
            const books = allData.filter(item => item.type === 'book');
            const stories = allData.filter(item => item.type === 'story');
            
            document.getElementById('sessions-count').textContent = sessions.length;
            document.getElementById('books-count').textContent = books.length;
            document.getElementById('stories-count').textContent = stories.length;
            
            // Staff dashboard counts
            document.getElementById('total-sessions').textContent = sessions.length;
            document.getElementById('total-stories').textContent = stories.length;
            document.getElementById('total-books').textContent = books.length;
        }

        // Utility functions
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.className = `fixed top-4 right-4 z-50 px-6 py-3 rounded-lg text-white font-medium ${
                type === 'success' ? 'bg-green-600' :
                type === 'error' ? 'bg-red-600' :
                'bg-blue-600'
            }`;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.remove();
            }, 5000);
        }

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>

  <!-- Login Modal -->
  <div id="login-modal" class="fixed inset-0 modal-backdrop hidden z-50 flex items-center justify-center p-4">
   <div class="bg-white rounded-xl shadow-2xl max-w-md w-full p-8">
    <div class="flex justify-between items-center mb-6">
     <h3 class="text-2xl font-bold text-gray-900">Welcome Back</h3>
     <button onclick="hideLoginModal()" class="text-gray-400 hover:text-gray-600">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
     </button>
    </div>
    <form id="login-form" class="space-y-4">
     <div>
      <label for="login-username" class="block text-sm font-medium text-gray-700 mb-2">Username</label>
      <input type="text" id="login-username" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter your username">
     </div>
     <div>
      <label for="login-password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
      <input type="password" id="login-password" required class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter your password">
     </div>
     <button type="submit" id="login-submit-btn" class="w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-800 transition-colors flex items-center justify-center">
      <span id="login-btn-text">Login</span>
      <div id="login-loading" class="loading-spinner ml-2 hidden"></div>
     </button>
    </form>
    <div class="mt-6 text-center">
     <p class="text-sm text-gray-600">Don't have an account? <button onclick="switchToRegister()" class="text-blue-600 hover:text-blue-800 font-semibold">Register here</button></p>
    </div>
   </div>
  </div>

  <!-- Register Modal -->
  <div id="register-modal" class="fixed inset-0 modal-backdrop hidden z-50 flex items-center justify-center p-4">
   <div class="bg-white rounded-xl shadow-2xl max-w-lg w-full p-8 max-h-[90vh] overflow-y-auto">
    <div class="flex justify-between items-center mb-6">
     <h3 class="text-2xl font-bold text-gray-900">Create Account</h3>
     <button onclick="hideRegisterModal()" class="text-gray-400 hover:text-gray-600">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
       <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
     </button>
    </div>
    <form id="register-form" class="space-y-4">
     <div class="grid md:grid-cols-2 gap-4">
      <div>
       <label for="register-firstname" class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
       <input type="text" id="register-firstname" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
      <div>
       <label for="register-lastname" class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
       <input type="text" id="register-lastname" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
      </div>
     </div>
     <div>
      <label for="register-username" class="block text-sm font-medium text-gray-700 mb-2">Username</label>
      <input type="text" id="register-username" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
     </div>
     <div>
      <label for="register-email" class="block text-sm font-medium text-gray-700 mb-2">ALU Student Email</label>
      <input type="email" id="register-email" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="yourname@alustudent.com">
     </div>
     <div>
      <label for="register-studentid" class="block text-sm font-medium text-gray-700 mb-2">Student ID <span class="text-gray-500 text-xs">(Optional)</span></label>
      <input type="text" id="register-studentid" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter if you know it">
     </div>
     <div>
      <label for="register-phone" class="block text-sm font-medium text-gray-700 mb-2">Phone Number <span class="text-gray-500 text-xs">(Optional)</span></label>
      <input type="tel" id="register-phone" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="e.g., 1234567890">
     </div>
     <div>
      <label for="register-password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
      <input type="password" id="register-password" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
     </div>
     <div>
      <label for="register-password2" class="block text-sm font-medium text-gray-700 mb-2">Confirm Password</label>
      <input type="password" id="register-password2" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
     </div>
     <button type="submit" id="register-submit-btn" class="w-full bg-blue-900 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-800 transition-colors flex items-center justify-center">
      <span id="register-btn-text">Create Account</span>
      <div id="register-loading" class="loading-spinner ml-2 hidden"></div>
     </button>
    </form>
    <div class="mt-6 text-center">
     <p class="text-sm text-gray-600">Already have an account? <button onclick="switchToLogin()" class="text-blue-600 hover:text-blue-800 font-semibold">Login here</button></p>
    </div>
   </div>
  </div>

</body>
</html>
